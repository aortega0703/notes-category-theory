\subsection{Pullbacks}

\begin{definition}[Pullback]\index{Pullback}

  A pullback is the limit of a
  diagram~\parencite[p.~114]{leinster:basic_category_theory}:
  % https://q.uiver.app/#q=WzAsMyxbMiwwLCJCIl0sWzAsMCwiQSJdLFsxLDAsIkMiXSxbMCwyLCJnIiwyXSxbMSwyLCJmIl1d
  \[\begin{tikzcd}[ampersand replacement=\&]
    A \& C \& B
    \arrow["g"', from=1-3, to=1-2]
    \arrow["f", from=1-1, to=1-2]
  \end{tikzcd}\]
\end{definition}

\begin{remark}
  A pullback of objects and morphism $A\overset{f}{\to} C \overset{g}{\from} B$
  is composed by the object $A \times_C B$ and morphisms $\pi_0:A \times_C B$,
  $\pi_1: A \times_C B\to B$ which form a commutative square:
  % https://q.uiver.app/#q=WzAsNCxbMSwwLCJCIl0sWzAsMSwiQSJdLFsxLDEsIkMiXSxbMCwwLCJBXFx0aW1lc19DQiJdLFswLDIsImciXSxbMSwyLCJmIiwyXSxbMywxLCJcXHBpXzAiLDJdLFszLDAsIlxccGlfMSJdLFszLDIsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
  \[\begin{tikzcd}[ampersand replacement=\&]
    {A\times_CB} \& B \\
    A \& C
    \arrow["g", from=1-2, to=2-2]
    \arrow["f"', from=2-1, to=2-2]
    \arrow["{\pi_0}"', from=1-1, to=2-1]
    \arrow["{\pi_1}", from=1-1, to=1-2]
    \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
  \end{tikzcd}\]
\end{remark}

\begin{theorem}
  Pullback squares preserve monomorphisms i.e. if $g$ is a monomorphism in the
  following pullback square then so is $\pi_1$:
  % https://q.uiver.app/#q=WzAsNCxbMSwwLCJCIl0sWzAsMSwiQSJdLFsxLDEsIkMiXSxbMCwwLCJBXFx0aW1lc19DQiJdLFswLDIsImciLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtb25vIn19fV0sWzEsMiwiZiIsMl0sWzMsMSwiXFxwaV8wIiwyXSxbMywwLCJcXHBpXzEiXSxbMywyLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
  \[\begin{tikzcd}[ampersand replacement=\&]
    {A\times_CB} \& B \\
    A \& C
    \arrow["g", tail, from=1-2, to=2-2]
    \arrow["f"', from=2-1, to=2-2]
    \arrow["{\pi_0}"', from=1-1, to=2-1]
    \arrow["{\pi_1}", from=1-1, to=1-2]
    \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
  \end{tikzcd}\]

  \begin{proof}
    Consider an object $X$ with morphisms $p, q: X\to A\times_C B$ such that
    $\pi_0 \circ p = \pi_0 \circ q$, then:
    \[
      \begin{aligned}
        \pi_0 \circ p &= \pi_0 \circ q\\
        f \circ \pi_0 \circ p &= f \circ \pi_0 \circ q\\
        g \circ \pi_1 \circ p &= g \circ \pi_1 \circ q\\
        \pi_1 \circ p &= \pi_1 \circ q
      \end{aligned}
    \]

    $X$ has morphisms into $A$ and $B$, namely $\pi_0 \circ p$, $\pi_0 \circ q$
    and $\pi_1 \circ p$, $\pi_1 \circ q$. Then, there must be a unique $h: X\to
    A\times_C B$ such that they are equal to $\pi_0 \circ h$ and $\pi_1 \circ
    h$, implying that $p=q=h$.
  \end{proof}
\end{theorem}